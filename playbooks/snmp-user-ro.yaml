
# Ansible will need some basic information to make sure
# it can connect to the target device before attempting
# a NETCONF message. Ansible will look in the same directory
# as the playbook file for ansible.cfg.
#
# Nearly all parameters in ansible.cfg can be overridden
# with ansible-playbook command line flags.

# Example of basic ansible.cfg file
#
#[defaults]
#inventory = ./ansible_host
#host_key_checking = False
#remote_user = USERNAME_HERE

# Example of basic ansible_host file referred to in
# ansible.cfg inventory.
#
#[all:vars]
#ansible_connection=netconf
#ansible_password=PASSWORD_HERE
#
#[MY_HOST_NAME]
#IP_ADDRESS_HERE
#
- name : snmp-user-ro
  hosts: iosxe
  connection: netconf
  gather_facts: no

  vars_files:
    - /etc/ansible/clemea2024-devnet-2111/vaults/ciscolive.vault

  tasks:
    - name: snmp-user-ro
      netconf_config:
        xml: |
            <config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">
              <native xmlns="http://cisco.com/ns/yang/Cisco-IOS-XE-native">
                <snmp-server>
                  <user xmlns="http://cisco.com/ns/yang/Cisco-IOS-XE-snmp">
                    <names>
                      <username>willem-ReadOnly</username>
                      <grpname>snmp-v3-ReadOnly</grpname>
                      <v3>
                        <auth>
                          <sha>
                            <auth>
                              <authpass>ciscolive123</authpass>
                              <priv>
                                <aes>
                                  <algo128>
                                    <privpass>
                                      <privpass>ciscolive123</privpass>
                                      <access>snmp-access</access>
                                    </privpass>
                                  </algo128>
                                </aes>
                              </priv>
                            </auth>
                          </sha>
                        </auth>
                      </v3>
                    </names>
                    <names>
                      <username>willem-ReadOnly</username>
                      <grpname>snmp-v3-ReadOnly</grpname>
                    </names>
                  </user>
                </snmp-server>
              </native>
            </config>

